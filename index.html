<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AlPy - Python and Algorithms</title>
        <link rel="stylesheet" href="css/style.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        />
    </head>
    <body>
        <div class="intro-container">
            <h1>Welcome to AlPy</h1>
            <p>
                Welcome to AlPy, short for Algorithms in Python. This website
                aims to interactively show you how to write python code along
                with some commonly used algorithms in programming. Think of
                algorithms like recipes; they are a set of instructions, which
                when followed do something useful.
                <br /><br />
                Unlike traditional tutorials or books, this website will have
                you write code as you go. The website will then test your code
                right inside the browser, and let you know if your code is
                correct. Without further ado, let's begin.
                <br /><br />
                Note: The website stores all the code you write and your
                progress so far in the browser. So if you clear your browser
                data, all progress will be lost.
            </p>
        </div>
        <div class="checklist-container" id="checklist-container"></div>
        <script>
            // Define problems structure
            const problems = {
                Basics: [
                    { id: "intro", title: "Introduction" },
                    { id: "function_no_return", title: "Simple function" },
                    { id: "numbers", title: "Numbers" },
                ],
            };

            // Function to generate the checklist HTML
            function generateChecklist() {
                const container = document.getElementById(
                    "checklist-container",
                );
                let html = '<h1 class="checklist-title">Exercises</h1>';

                for (const [category, problemList] of Object.entries(
                    problems,
                )) {
                    html += `<h1 class="checklist-title checklist-subtitle">${category}</h1>`;
                    html += '<ul class="problem-checklist">';

                    problemList.forEach((problem) => {
                        const solved =
                            localStorage.getItem(`${problem.id}_solved`) ===
                            "true";
                        const iconClass = solved
                            ? "fa-solid fa-square-check problem-checkbox solved"
                            : "fa-regular fa-square problem-checkbox";

                        html += `
                            <li class="problem-item">
                                <i id="${problem.id}-icon" class="${iconClass}"></i>
                                <a href="./ide?problem=${problem.id}" class="problem-label">${problem.title}</a>
                            </li>
                        `;
                    });

                    html += "</ul>";
                }

                container.innerHTML = html;
            }

            function updateCheckboxes() {
                for (const problemList of Object.values(problems)) {
                    problemList.forEach((problem) => {
                        const icon = document.getElementById(
                            `${problem.id}-icon`,
                        );
                        const solved =
                            localStorage.getItem(`${problem.id}_solved`) ===
                            "true";
                        if (icon) {
                            if (solved) {
                                icon.className =
                                    "fa-solid fa-square-check problem-checkbox solved";
                            } else {
                                icon.className =
                                    "fa-regular fa-square problem-checkbox";
                            }
                        }
                    });
                }
            }

            // Generate checklist on page load
            generateChecklist();

            // Update when storage changes (e.g., from another tab)
            window.addEventListener("storage", updateCheckboxes);
        </script>
    </body>
</html>
